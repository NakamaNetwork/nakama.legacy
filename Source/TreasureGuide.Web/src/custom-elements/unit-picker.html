<template>
    <ux-dialog>
        <ux-dialog-header>
            <div class="right">
                <a click.delegate="cancel()" md-button="flat: true;" class="modal-action">X</a>
            </div>
            <h3>Select a Unit</h3>
        </ux-dialog-header>
        <ux-dialog-body>
            <div class="row">
                <form with.bind="searchModel">
                    <div class="col m6">
                        <div class="row">
                            <md-input md-label="Term" md-type="text" md-value.two-way="term"></md-input>
                        </div>
                        <div class="row">
                            <div class="col m4">
                                <md-checkbox md-checked.two-way="global">Global</md-checkbox>
                            </div>
                            <div class="col m4">
                                <md-checkbox md-checked.two-way="freeToPlay">Free to Play</md-checkbox>
                            </div>
                            <div class="col m4">
                                <md-checkbox md-checked.two-way="myBox">In my Box</md-checkbox>
                            </div>
                        </div>
                    </div>
                    <div class="col m3">
                        <md-input md-label="Class" md-type="number" md-value.two-way="classes"></md-input>
                    </div>
                    <div class="col m3">
                        <md-input md-label="Type" md-type="number" md-value.two-way="types"></md-input>
                        <md-checkbox md-checked.two-way="forceTypes">Force</md-checkbox>
                    </div>
                </form>
            </div>
            <div class="row center" if.bind="pages > 1">
                <md-pagination md-pages.bind="pages" md-active-page.bind="searchModel.page" md-on-page-changed.delegate="onPageChanged($event)"></md-pagination>
            </div>
            <div class="row center">
                <div if.bind="units.length > 0">
                    <p>${((searchModel.page - 1) * searchModel.pageSize) +1} - ${((searchModel.page - 1) * searchModel.pageSize) + units.length} of ${resultCount}</p>
                </div>
                <div class="unit-collection">
                    <button class="grey unit-button" md-button="large: true" md-waves click.delegate="clicked(null)">
                        <i class="material-icons">person_outline</i>
                    </button>
                    <button repeat.for="unit of units" class="grey unit-button" md-button="large: true" md-waves click.delegate="clicked(unit.id)">
                        <img src.bind="getIcon(unit.id)">
                    </button>
                </div>
            </div>
            <div class="row center" if.bind="!units || units.length == 0">
                <h3>Search yielded no results!</h3>
            </div>
        </ux-dialog-body>
        <ux-dialog-footer>
            <a click.delegate="cancel()" md-button="flat: true;" md-waves="color: accent;" class="modal-action">Cancel</a>
        </ux-dialog-footer>
    </ux-dialog>
</template>
