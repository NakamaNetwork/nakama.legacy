<template>
    <ux-dialog>
        <ux-dialog-header>
            <div class="_floatRight">
                <a click.delegate="cancel()" class="button _flat modal-action">X</a>
            </div>
            <h3>Select a Stage</h3>
        </ux-dialog-header>
        <ux-dialog-body>
            <stage-search search-model.two-way="searchModel"></stage-search>
            <loading-area if.bind="loading"></loading-area>
            <div if.bind="!loading">
                <div class="row">
                    <search-pager search-model.bind="searchModel"></search-pager>
                </div>
                <div class="row" if.bind="stages.length > 0">
                    <ul class="listnav">
                        <li repeat.for="stage of stages" class="${(stageId === stage.id ? 'active' : '')}">
                            <a href="#" click.delegate="clicked(stage.id)">
                                <global-display global.bind="stage.global"></global-display>
                                ${stage.name}
                                <stage-type-display type.bind="stage.type" class="_floatRight"></stage-type-display>
                            </a>
                        </li>
                    </ul>
                </div>
                <div class="row">
                    <search-pager search-model.bind="searchModel" bottom="true"></search-pager>
                </div>
            </div>
        </ux-dialog-body>
        <ux-dialog-footer>
            <a click.delegate="clicked(null)" class="button _danger modal-action">
                <i class="fa fa-fw fa-map-o"></i>
                Unset
            </a>
            <a click.delegate="cancel()" class="button modal-action">Cancel</a>
        </ux-dialog-footer>
    </ux-dialog>
</template>
