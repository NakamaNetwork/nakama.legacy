<template>
    <alert-area></alert-area>
    <header>
        <div>
            <ul class.bind="topnavCss">
                <li class="brand">
                    <a route-href="route: home" class="brand-logo">
                        <img src="content/home/birthday.png" class="logo-hat" alt="Happy Birthday, Nakama Network!" />
                        ${router.title}
                        <span class="beta">1 year!</span>
                    </a>
                </li>
                <li repeat.for="nav of authorizedRoutes">
                    <a href.bind="nav.href" class="${nav.isActive ? 'active' : ''}">
                        ${nav.title}
                    </a>
                </li>
                <li class="_floatRight" auth-req="inverse: true">
                    <a href="#" click.trigger="accountService.login()">
                        Login
                    </a>
                </li>
                <li class="_floatRight" auth-req>
                    <a href="#" click.trigger="accountService.logout()">
                        Logout
                    </a>
                </li>
                <li class="_floatRight nav-icon" auth-req="BoxUser">
                    <a route-href="route: boxes"
                       title.bind="boxTitle"
                       class.bind="boxClass">
                        <span class="fa-stack">
                            <i class="fa fa-square-o fa-stack-2x"></i>
                            <i class="fa fa-stack-1x fa-users" if.bind="hasBox"></i>
                        </span>
                    </a>
                </li>
                <li class="_floatRight nav-icon" auth-req>
                    <a route-href="route: notifications"
                       title.bind="notificationTitle">
                        <span class="fa-stack" class.bind="badgeClass" data-count.bind="notificationService.notificationCount">
                            <i class="fa fa-stack-1x" class.bind="notificationClass"></i>
                        </span>
                    </a>
                </li>
                <li class="_floatRight" auth-req>
                    <a route-href="route: profile; params.bind: { id: accountService.userProfile.userName }"
                       class.bind="accountIsActive">
                        ${accountService.userProfile.userName}
                    </a>
                </li>
                <li class="-icon">
                    <a click.trigger="toggleDropdown()">
                        <i class="fa fa-fw fa-bars"></i>
                    </a>
                </li>
            </ul>
        </div>
    </header>
    <main>
        <div id="container" class="container">
            <router-view></router-view>
        </div>
    </main>
    <footer>
        <div class="jumbo _dark footer">
            <a route-href="route: tos">Terms of Service</a>
            |
            <a route-href="route: privacy">Privacy Policy</a>
            <br />
            Developed by <a href="http://robocafaz.com" target="_blank">RoboCafaz</a>
            <br />
            <a class="button _small _info" href="https://github.com/RoboCafaz/TreasureGuide">
                <i class="fa fa-fw fa-github"></i>View on GitHub
            </a>
            <a class="button _small _info" href="https://discord.gg/vtAeMas">
                <img src="/content/Discord-Logo-White.svg" class="fa fa-fw" />Join the Discord
            </a>
            <br />
            Game data sourced from <a href="https://optc-db.github.io/" target="_blank">OPTC-db</a>
        </div>
    </footer>
</template>